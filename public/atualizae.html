<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>Atualizar</title>
</head>
<body>

    <center><h1>Atualize as suas informações</h1></center>

    
<div class="box">
        <div class="inputBox">

    <form>
        <div class="inputBox">
            <label>ID:</label>
            <input id="id" class="inputUser" required>
        </div><br><br>

        <div class="inputBox">
            <label>Nome Completo:</label>
            <input type="nome" id="nome" class="inputUser" required>
        </div><br><br>

        <div class="inputBox">
            <label>Data de nascimento:</label>
            <input type="date" id="nascimento"  class="inputUser" required>
        </div><br><br>


        <div class="inputBox">
            <label>Número do plano de saúde:</label>
            <input type="senha" id="plano"  class="inputUser" required>
        </div><br><br>

        <div class="inputBox">
            <label>Telefone:</label>
            <input type="tel" id="telefone"  class="inputUser" required>
        </div><br><br>
 
        <div class="inputBox">
            <label>Motivo da consulta:</label>
            <input type="senha" id="consulta"  class="inputUser" required>
        </div><br><br>

        <div class="inputBox">
            <label>data:</label>
            <input type="date" id="dia"  class="inputUser" required>
        </div><br><br>

        <div class="inputBox">
            <label>Horario:</label>
            <input type="time" id="hora"  class="inputUser" required>
        </div><br><br>

        <div class="inputBox">
            <label>Informações adicionais:</label><br>
            <textarea type="mensagem" id="mensagem" cols="40" rows="4"  class="inputUser"></textarea> 
        </div><br><br>

        <div class="inputBox">
            <label>E-mail:</label>
            <input type="email" id="email"  class="inputUser"required>
        </div><br><br>

    <input type="button" onclick="atualizarDados()" value="Atualizar" class="entrar"><br><br>
   

    <h4> Deseja cancelar sua consulta?<a href="deletar.html"> Clique aqui!</a></h4>
</div>
</div>
<br><br><br><br>

    <script>
         //PUT - UPDATE
         function atualizarDados(){
            const id = document.getElementById('id').value;
            const nome = document.getElementById('nome').value;
            const nascimento = document.getElementById('nascimento').value;
            const plano = document.getElementById('plano').value;
            const telefone = document.getElementById('telefone').value;
            const consulta = document.getElementById('consulta').value;
            const dia = document.getElementById('dia').value;
            const hora = document.getElementById('hora').value;
            const mensagem = document.getElementById('mensagem').value;
            const email = document.getElementById('email').value;

            fetch(`cadastro/${id}`,{
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({nome: nome, nascimento: nascimento, plano: plano, telefone: telefone, consulta: consulta, dia: dia, hora: hora, mensagem: mensagem, email: email})
            })
            .then(response => response.json())

            alert("Informações atualizadas com sucesso");
            window.location.reload();

        }

      
    </script>


    
</body>
</html>